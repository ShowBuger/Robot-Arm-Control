<robot
  name="jawasm1" xmlns:xacro="http://ros.org/wiki/xacro">
  
    <link name="world"/>

    <joint name="L_hand_base_joint" type="fixed">
      <origin
      xyz="0.5 0.5 0.05"
      rpy="0 -1.57 0" />
      <parent link="world"/>
      <child link="base_link"/>
    </joint>
  
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.00339303654278191 -2.1205433560656E-05 -0.0099185365078758"
        rpy="0 0 0" />
      <mass
        value="0.105853592307918" />
      <inertia
        ixx="3.93795927851199E-05"
        ixy="-8.7395226509728E-08"
        ixz="5.91928672040786E-07"
        iyy="0.000106376720416166"
        iyz="-1.82858764303774E-10"
        izz="0.000125852616063213" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.894117647058823 0.913725490196078 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="gripper_link1">
    <inertial>
      <origin
        xyz="0.0164149658242926 9.75754915755189E-09 0.00898193900447147"
        rpy="0 0 0" />
      <mass
        value="0.00647716099397792" />
      <inertia
        ixx="2.95068972140683E-07"
        ixy="8.63208170411155E-13"
        ixz="-1.92008628754607E-09"
        iyy="1.69979619476872E-06"
        iyz="-1.99232397395103E-13"
        izz="1.45016449434989E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link1.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.894117647058823 0.913725490196078 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link1.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="gripper_joint1"
    type="revolute">
    <origin
      xyz="0.036 -0.04 -0.019"
      rpy="-3.0158E-16 -7.1586E-16 -0.30719" />
    <parent
      link="base_link" />
    <child
      link="gripper_link1" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="0"
      upper="0.86"
      effort="1"
      velocity="50" />
  </joint>
  <link
    name="gripper_link2">
    <inertial>
      <origin
        xyz="0.011366555972498 0.0118642725662323 0.0060000073930068"
        rpy="0 0 0" />
      <mass
        value="0.0127543420299361" />
      <inertia
        ixx="5.68538478020233E-07"
        ixy="-2.68012262729007E-07"
        ixz="9.34125984931838E-13"
        iyy="1.45145776457487E-06"
        iyz="9.34355360561326E-13"
        izz="1.50564598220449E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link11.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.894117647058823 0.913725490196078 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link11.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="gripper_joint2"
    type="revolute">
    <origin
      xyz="0.042 0 0.003"
      rpy="5.0393E-16 5.6225E-16 0.30719" />
    <parent
      link="gripper_link1" />
    <child
      link="gripper_link2" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="0"
      upper="1"
      effort="1"
      velocity="50" />
    <mimic
        joint="gripper_joint1"
        multiplier="1"
        offset="0" />
  </joint>
  <link
    name="gripper_link3">
    <inertial>
      <origin
        xyz="0.0164149658242926 9.75754915755189E-09 0.00898193900447147"
        rpy="0 0 0" />
      <mass
        value="0.00647716099397793" />
      <inertia
        ixx="2.95068972140683E-07"
        ixy="8.63208169650113E-13"
        ixz="-1.92008628755341E-09"
        iyy="1.69979619476872E-06"
        iyz="-1.99232397320157E-13"
        izz="1.45016449434989E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.894117647058823 0.913725490196078 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link2.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="gripper_joint3"
    type="revolute">
    <origin
      xyz="0.036 0.04 -0.019"
      rpy="-2.6397E-16 3.7199E-16 0.30719" />
    <parent
      link="base_link" />
    <child
      link="gripper_link3" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="0"
      upper="0.86"
      effort="1"
      velocity="50" />
    <mimic
        joint="gripper_joint1"
        multiplier="1"
        offset="0" />
  </joint>
  <link
    name="gripper_link4">
    <inertial>
      <origin
        xyz="-0.011366555972498 0.0118642725662323 -0.0060000073930068"
        rpy="0 0 0" />
      <mass
        value="0.0127543420299362" />
      <inertia
        ixx="5.68538478020238E-07"
        ixy="2.6801226272901E-07"
        ixz="9.34125986250171E-13"
        iyy="1.45145776457489E-06"
        iyz="-9.34355361631596E-13"
        izz="1.5056459822045E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link22.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.894117647058823 0.913725490196078 0.929411764705882 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://jawasm1/meshes/Link22.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="gripper_joint4"
    type="revolute">
    <origin
      xyz="0.042 0 0.015"
      rpy="-3.641E-16 2.4584E-16 2.8344" />
    <parent
      link="gripper_link3" />
    <child
      link="gripper_link4" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="0"
      upper="1"
      effort="1"
      velocity="50" />
    <mimic
        joint="gripper_joint3"
        multiplier="1"
        offset="0" />
  </joint>
  
<xacro:macro name="controller_plugin_gazebo" params="robot_namespace:=''">
 <gazebo>
   <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
    <robotNamespace>/</robotNamespace>
    <legacyModeNS>true</legacyModeNS>
    <controlPeriod>0.001</controlPeriod>
    <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
   </plugin>
  </gazebo>
  </xacro:macro>
  
  <xacro:controller_plugin_gazebo />
  
  
  <!--Transmission for Ros Control-->
  <xacro:macro name="transmission_block" params="joint_name">
  <transmission name="tran1">
   <type>transmission_interface/SimpleTransmission</type>
   <joint name="${joint_name}">
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
   </joint>
   <actuator name="motor1">
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
   </actuator>
  </transmission>
  </xacro:macro>
  
  <xacro:transmission_block joint_name="gripper_joint1"/>
  
  <xacro:macro name="mimic_joint_plugin_gazebo" params="name_prefix parent_joint mimic_joint has_pid:=false multiplier:=1.0 offset:=0 sensitiveness:=0.0 max_effort:=1.0 robot_namespace:=''">
    <gazebo>
      <plugin name="${name_prefix}_mimic_joint_plugin" filename="libroboticsgroup_gazebo_mimic_joint_plugin.so">
        <joint>${parent_joint}</joint>
        <mimicJoint>${mimic_joint}</mimicJoint>
        <xacro:if value="${has_pid}">  
          <hasPID />
        </xacro:if>
        <multiplier>${multiplier}</multiplier>
        <offset>${offset}</offset>
        <sensitiveness>${sensitiveness}</sensitiveness>
        <maxEffort>${max_effort}</maxEffort> 
        <xacro:unless value="${robot_namespace == ''}">
          <robotNamespace>${robot_namespace}</robotNamespace>
        </xacro:unless>
      </plugin>
    </gazebo>
  </xacro:macro>
    
  <xacro:mimic_joint_plugin_gazebo name_prefix="gripper_joint2"
    parent_joint="gripper_joint1" mimic_joint="gripper_joint2"
    has_pid="true" multiplier="1.0" max_effort="10.0" />
    
  <xacro:mimic_joint_plugin_gazebo name_prefix="gripper_joint3"
    parent_joint="gripper_joint1" mimic_joint="gripper_joint3"
    has_pid="true" multiplier="1.0" max_effort="10.0" />    
    
  <xacro:mimic_joint_plugin_gazebo name_prefix="gripper_joint4"
    parent_joint="gripper_joint3" mimic_joint="gripper_joint4"
    has_pid="true" multiplier="1" max_effort="10.0" />  
    
</robot>
